
@startuml
actor Usuário
boundary ContrataPlanoGUI
control ControladorContrataPlano
participant Plano
participant Pagamento
participant Restaurante

Usuário -> ContrataPlanoGUI : acessarTelaPlanos()
activate ContrataPlanoGUI
ContrataPlanoGUI -> ControladorContrataPlano : listarPlanos()
activate ControladorContrataPlano
ControladorContrataPlano -> Plano : getPlanosDisponiveis()
activate Plano
Plano --> ControladorContrataPlano : listaPlanos
deactivate Plano
ControladorContrataPlano -> ContrataPlanoGUI : exibirPlanos(listaPlanos)
deactivate ControladorContrataPlano
deactivate ContrataPlanoGUI

Usuário -> ContrataPlanoGUI : contratarPlano(planoId)
activate ContrataPlanoGUI
ContrataPlanoGUI -> ControladorContrataPlano : contratarPlano(planoId, dadosPagamento)
activate ControladorContrataPlano
ControladorContrataPlano -> Pagamento : processarPagamento(dadosPagamento)
activate Pagamento
Pagamento --> ControladorContrataPlano : pagamentoAprovado
deactivate Pagamento

alt pagamento aprovado
    ControladorContrataPlano -> Restaurante : associarPlano(planoId)
    activate Restaurante
    deactivate Restaurante
    ControladorContrataPlano -> ContrataPlanoGUI : confirmarAtivacao()
else pagamento recusado
    ControladorContrataPlano -> ContrataPlanoGUI : notificarErro()
    deactivate ControladorContrataPlano
end
deactivate ContrataPlanoGUI

@enduml
