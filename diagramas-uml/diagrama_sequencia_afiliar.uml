@startuml
actor Cliente
boundary AfiliarGUI <<boundary>>
control ControladorAfiliar <<controller>>
collections "clientes : Cliente" as clientes
participant "Cliente" as cliente
participant TermosDeUso

Cliente -> AfiliarGUI : InformaDadosPessoais()
activate AfiliarGUI
AfiliarGUI -> ControladorAfiliar : SolicitarAfiliação(CPF, Nome, email)
activate ControladorAfiliar

ControladorAfiliar -> clientes : verificaSeValido(CPF, Nome, email)

alt ehValido
    ControladorAfiliar -> AfiliarGUI : PedirVerificacaoEmail()
    
    ControladorAfiliar -> clientes : solicitarNovaAfiliação(CPF, Nome, email)
    activate clientes

    clientes -> cliente : createNewCliente(CPF, Nome, email)
    activate cliente
    cliente --> clientes : retorna novo cliente
    deactivate cliente
    deactivate clientes

    ControladorAfiliar -> TermosDeUso : SolicitarTermos()
    TermosDeUso --> ControladorAfiliar : retorna termos
    ControladorAfiliar -> AfiliarGUI : ExibirTermosDeUso()

    Cliente -> AfiliarGUI : AceitaTermos()
    AfiliarGUI -> ControladorAfiliar : RegistrarAceite()

    ControladorAfiliar -> clientes : registrarAceite(cliente) 
    activate clientes
    clientes -> clientes : adicionarNovoCliente(cliente)
    deactivate clientes

    ControladorAfiliar -> AfiliarGUI : ExibirSucessoAfiliação()

else
end

deactivate ControladorAfiliar
deactivate AfiliarGUI
@enduml
